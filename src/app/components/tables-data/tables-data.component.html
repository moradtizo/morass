<main id="main" class="main">
    <div class="pagetitle">
       <h1>Morasse budgétaire</h1>
       <nav>
          <ol class="breadcrumb">
             <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
             <li class="breadcrumb-item">Tables</li>
             <li class="breadcrumb-item active">Morasse budgétaire</li>
          </ol>
       </nav>
    </div>
    <section class="section">
       <div class="row">
          <div class="col-lg-12">
             <div class="card">
                <div class="card-body">
                   <!-- <h5 class="card-title">Datatables</h5>
                   <p>Add lightweight datatables to your project.</p> -->

                  <!-- -->
                  <div class="row">
                    <div class="col-md-6 mt-3 mb-3">
                      <input type="text" class="form-control form-control-flush ps-10"
                      name="search"
                      [(ngModel)]="search"
                      (input)="searchMorasse()"
                      placeholder="Search..." />
                    </div>

                    <div class="col-sm-6 col-md-6 text-end mt-3 mb-3">

                      <div class="dt-buttons btn-group flex-wrap">
                        <button class="btn  buttons-excel buttons-html5  me-2" type="button" data-bs-toggle="modal" data-bs-target="#verticalycentered" >
                          <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAOpJREFUSEvtlbsNwjAQQF8KVqBBQkIU0NBTsQJbwAI0bAAjwCAMQEUNBR0CKRUrUIBOsqXoiPFPEU2usZzz3buPcy5oWIqG/RMLeJuAgu2CDxrHLcDb8rZEzIENMFbFsrdNl8ju7fErsAIO9oO+piXQq+lEKEBMb8DQBfA1MVqvM4h2oLL9sg8B7ICF4wLvgWVFlwToAEdgqiAnYAa8cgFi3wUuZpX9E5iYtcpNysA6kAwkExGJXDLQkgUQZ7YXUvs6yQb4htX/AQ+g7wvTo78DA9efLLNoC4wSIWdg/WsWJfp1m8W+ydEBfAD68zQZ7jJc1AAAAABJRU5ErkJggg=="/></span>
                        </button>
                        <button class="btn  buttons-pdf buttons-html5 " (click)="downloadTemplate()"tabindex="0" aria-controls="example1" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Export">
                          <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAOtJREFUSEvtlLENwjAQRV8KVqBBQkIU0NBTsQJbwAI0bAAjwCAMQEUNBR0CKRUrUIAO2VJ0EPucKF3cWHbu/rt/SS6j4ZU1rE8qYOEK2lsLSwFMgaMTngEnC8QK6AIXQHZZT2Di9iDHAui4ysVBcYkDcfIKESyAHeB7r7XkXSzrAor5b3ewFPYNNQc64dqAObABxsq2L0QD/NmHX4EVcPAX2kEO9P701AqQ1BswLAPEWpD8XDtIFlBuf/JbgP4earcoNt9aQKxDRFv0APpRmXDAHRiU/ckyi7bAqCLkDKxDs6iibnla6rhOLuADaREyGWG4OkIAAAAASUVORK5CYII="/></span>
                        </button>
                        <button class="btn  buttons-print " [routerLink]="['/add-morass']" routerLinkActive="router-link-active"   tabindex="0" aria-controls="example1" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Add here">
                          <span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAMJJREFUSEvdlE0KwkAMRl/PIQjShb2Nl3HjDfRCPYib7oqC91AqDgxpyc+0peBsJ/le8mUmFSufamV9NMAJuAJNsIgOOAPtkKcBXsAuKJ7Ce6C2AO9C8ZT2LV7rYFNAKkwrYlYHRYBUjTsZCHVgAaw/I2EjizYH5K/WbWPettXBfwE8nzw8ZI/oyEZtBk9gH1X9xT+Ag9xFcsjDur4BxyDkDlym1rUEBHWnwzWLFgeUeq6ukPyy1HM3YBFLpIi1IWdDPx8jLBkZXJ+qAAAAAElFTkSuQmCC"/></span>
                        </button>
                      </div>
                    </div>

                </div>



                   <table class="table table-striped table ">
                      <thead class="table-success">
                         <tr>
                            <th scope="col">Pays</th>
                            <th scope="col">Anneé</th>
                            <th scope="col">CF</th>
                            <th scope="col">CE</th>
                            <th scope="col">Prog</th>
                            <th scope="col">Rég</th>
                            <th scope="col">Proj</th>
                            <th scope="col">Type</th>
                            <th scope="col">Ligne</th>
                            <th scope="col">Service et depences</th>
                            <th scope="col">Crédits de Paiement</th>
                            <th scope="col">Action</th>

                         </tr>
                      </thead>
                      <tbody>
                         <tr *ngFor="let mo of morass">
                            <th scope="row">{{ mo.pays }}</th>
                            <td>{{ mo.annee }}</td>
                            <td>{{ mo.codeFonc }}</td>
                            <td>{{ mo.codeEco }}</td>
                            <td>{{ mo.prog }}</td>
                            <td>{{ mo.reg }}</td>
                            <td>{{ mo.proj }}</td>
                            <td>{{ mo.type }}</td>
                            <td>{{ mo.lig }}</td>
                            <td>{{ mo.rubriques }}</td>
                            <td>{{ mo.creditsDePaiemant }}</td>
                            <td class="test">
                              <div class="button-container">
                                <button class="btn"data-bs-toggle="tooltip" data-bs-placement="top" title="Delete" (click)="destroyMorass((mo?.id ?? '').toString())">
                                  <i class='bx bxs-x-circle'></i>
                                </button>
                                <button class="btn" data-bs-toggle="tooltip" data-bs-placement="top" title="Update" [routerLink]="['/edit-morass',mo.id]">
                                  <i class='bx bx-edit'></i>
                                </button>
                              </div>
                            </td>


                      </tbody>
                   </table>

                </div>
             </div>
          </div>
       </div>
    </section>
 </main>

 <div class="card-body">
  <div class="modal fade" id="verticalycentered" tabindex="-1">
     <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content ">
           <div class="modal-header ">
              <h5 class="modal-title ">Choose File</h5>
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" d="M20 2H4c-1.103 0-2 .894-2 1.992v12.016C2 17.106 2.897 18 4 18h3v4l6.351-4H20c1.103 0 2-.894 2-1.992V3.992A1.998 1.998 0 0 0 20 2zm-3.293 11.293-1.414 1.414L12 11.414l-3.293 3.293-1.414-1.414L10.586 10 7.293 6.707l1.414-1.414L12 8.586l3.293-3.293 1.414 1.414L13.414 10l3.293 3.293z"></path></svg>
             </div>
           <div class="modal-body text-center">
             <div class="drop-container" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)" (drop)="onFileDrop($event)">
               <div class="drop-message" *ngIf="!fileSelected" (click)="browseFile()">
                 <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 30 30" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="M13 19v-4h3l-4-5-4 5h3v4z"></path><path d="M7 19h2v-2H7c-1.654 0-3-1.346-3-3 0-1.404 1.199-2.756 2.673-3.015l.581-.102.192-.558C8.149 8.274 9.895 7 12 7c2.757 0 5 2.243 5 5v1h1c1.103 0 2 .897 2 2s-.897 2-2 2h-3v2h3c2.206 0 4-1.794 4-4a4.01 4.01 0 0 0-3.056-3.888C18.507 7.67 15.56 5 12 5 9.244 5 6.85 6.611 5.757 9.15 3.609 9.792 2 11.82 2 14c0 2.757 2.243 5 5 5z"></path></svg>
                 <p>Drag and drop file here, or</p>
                 <p>Click to browse</p>
               </div>
               <div class="drop-message" *ngIf="fileSelected">
                 <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 30 30" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="m10 15.586-3.293-3.293-1.414 1.414L10 18.414l9.707-9.707-1.414-1.414z"></path></svg>
                 <p>File selected:</p>
                 <p>{{ selectedFile?.name }}</p>
               </div>
               <input type="file" class="form-control" (change)="onFileChange($event)" (click)="fileInput.click()" #fileInput hidden />
             </div>
             <!-- <button class="btn btn-primary" aria-label="Close" type="button" (click)="uploadFile()" [disabled]="!fileSelected">
               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="m12 18 4-5h-3V2h-2v11H8z"></path><path d="M19 9h-4v2h4v9H5v-9h4V9H5c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-9c0-1.103-.897-2-2-2z"></path></svg>
               Import
             </button> -->
           </div>
           <div class="modal-footer ">
             <button class="btn btn-primary" aria-label="Close" type="button" (click)="uploadFile()" [disabled]="!fileSelected" data-bs-dismiss="modal">
               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="m12 18 4-5h-3V2h-2v11H8z"></path><path d="M19 9h-4v2h4v9H5v-9h4V9H5c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-9c0-1.103-.897-2-2-2z"></path></svg>
               Enregistrer
             </button>
             <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="clearPopupData()">Cancel</button>
           </div>
        </div>
     </div>
  </div>
</div>


